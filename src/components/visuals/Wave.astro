<script>
  // Grab wave bars
  const bars: Array<HTMLDivElement> = Array.from(document.querySelectorAll("div.wave-bar"));

  // Animation parameters
  const minHeight = 10;
  const maxHeight = 100;
  const speed = 0.05;
  let time = 0;
  const colors = [
    "#f72585",
    "#b5179e",
    "#7209b7",
    "#560bad",
    "#480ca8",
    "#3a0ca3",
    "#3f37c9",
    "#4361ee",
    "#4895ef",
    "#4cc9f0",
  ];

  function animate() {
    time += speed;

    bars.forEach((bar, index) => {
      // Create a wave pattern using sine waves with different phases
      const height = minHeight + ((Math.sin(time + index * 0.3) + 1) * (maxHeight - minHeight)) / 2;
      bar.style.height = `${height}px`;
      if (index > 9) {
        bar.style.backgroundColor = colors[index % 10];
        bar.style.filter = `drop-shadow(0 0 0.25rem ${colors[index % 10]})`;
      } else {
        bar.style.backgroundColor = colors[index];
        bar.style.filter = `drop-shadow(0 0 0.25rem ${colors[index]})`;
      }
    });

    // Request the next frame
    requestAnimationFrame(animate);
  }

  animate();
</script>

<div class="wave-container">
  <div class="wave-bar"></div>
  <div class="wave-bar"></div>
  <div class="wave-bar"></div>
  <div class="wave-bar"></div>
  <div class="wave-bar"></div>
  <div class="wave-bar"></div>
  <div class="wave-bar"></div>
  <div class="wave-bar"></div>
  <div class="wave-bar"></div>
  <div class="wave-bar"></div>
</div>

<style>
  .wave-container {
    /* rainbow color variables */
    --c0: #f72585;
    --c1: #b5179e;
    --c2: #7209b7;
    --c3: #560bad;
    --c4: #480ca8;
    --c5: #3a0ca3;
    --c6: #3f37c9;
    --c7: #4361ee;
    --c8: #4895ef;
    --c9: #4cc9f0;
    min-height: 150px;
    min-width: 150px;
    background-color: #0e0d11;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: space-around;
    padding-inline: 1em;
  }

  .wave-bar {
    width: 3px;
    background-color: var(--wave-blue);
    will-change: filter;
    filter: drop-shadow(0 0 0.25rem var(--wave-blue));
    border-radius: 2px;
    transition: height 0.1s ease;
  }
</style>
